/* Philter v1.1.1 | (c) 2015 Liudas Dzisevicius | MIT License */
!function(){"use strict";function t(){for(var t=0;t<this.filters.length;t++){if(this.options.tag)var e=document.querySelectorAll("[data-philter-"+this.filters[t]+"]");else var e=document.querySelectorAll("[data-"+this.filters[t]+"]");if(e)for(var r=0;r<e.length;r++)this.elements.indexOf(e[r])<0&&this.elements.push(e[r])}}function e(){for(var t=["",""],e=0;e<this.elements.length;e++){for(var i=0;i<this.filters.length;i++){if(this.options.tag)var o=this.elements[e].getAttribute("data-philter-"+this.filters[i]);else var o=this.elements[e].getAttribute("data-"+this.filters[i]);if(o){if(this.options.tag)var l="[data-philter-"+this.filters[i]+'="'+o+'"]';else var l="[data-"+this.filters[i]+'="'+o+'"]';var n=this.elements[e].offsetWidth,a=this.elements[e].offsetHeight;o=o.split(" "),o.unshift(this.filters[i]),t=r.call(this,t,o,s(o[0]),n,a)}}this.styleString+=l+"{filter:"+t[0]+";-webkit-filter:"+t[0]+";}",t[0]!=t[1]&&(this.styleString+=l+":hover{filter:"+t[1]+";-webkit-filter:"+t[1]+";}"),t=["",""],l=""}}function r(t,e,r,s,o){switch(e[0]){case"drop-shadow":t[0]=t[0]+e[0]+"("+e[1]+r+" "+e[2]+r+" "+e[3]+r+" rgba(0,0,0,"+.01*e[4]+")) ",e[5]&&e[6]&&e[7]&&e[8]?t[1]=t[1]+e[0]+"("+e[5]+r+" "+e[6]+r+" "+e[7]+r+" rgba(0,0,0,"+.01*e[8]+")) ":t[1]=t[1]+e[0]+"("+e[1]+r+" "+e[2]+r+" "+e[3]+r+" rgba(0,0,0,"+.01*e[4]+")) ";break;case"svg":t[0]=t[0]+"url("+r+e[1]+") ",e[2]?t[1]=t[1]+"url("+r+e[2]+") ":t[1]=t[1]+"url("+r+e[1]+") ";break;case"color":++this.filterCount.color,i.call(this,e[1],e[2],s,o),t[0]=t[0]+"url("+r+"color-"+this.filterCount.color+") ",e[3]&&e[4]?(++this.filterCount.color,i.call(this,e[3],e[4],s,o),t[1]=t[1]+"url("+r+"color-"+this.filterCount.color+") "):t[1]=t[1]+"url("+r+"color-"+this.filterCount.color+") ";break;default:t[0]=t[0]+e[0]+"("+e[1]+r+") ",e[2]?t[1]=t[1]+e[0]+"("+e[2]+r+") ":t[1]=t[1]+e[0]+"("+e[1]+r+") "}return t}function i(t,e,r,i,s){var l=document.getElementById("svg");l||(l=document.createElement("div"),l.setAttribute("id","svg"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><defs></defs></svg>'),e=.01*e;var n=new XMLHttpRequest;n.open("GET",this.options.url+"/philter/svg/color.svg"),n.send(null),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var s=n.response;if(s){l.querySelector("defs").innerHTML=s,l.querySelector("filter").setAttribute("id","color-"+this.filterCount.color);var a=l.querySelector("feFlood");o(a,{"flood-opacity":e,"flood-color":t,width:r,height:i}),document.body.appendChild(l)}else console.error(this.errors.falsePath)}else 404===n.status&&console.error(this.errors.falsePath)}.bind(this)}function s(t){var e={blur:"px","hue-rotate":"deg","drop-shadow":"px",svg:"#",color:"#","default":"%"};switch(t){case"blur":return e[t];case"hue-rotate":return e[t];case"drop-shadow":return e[t];case"svg":return e[t];case"color":return e[t];default:return e["default"]}}function o(t,e){for(var r in e)t.setAttribute(r,e[r])}function l(t,e){var r;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}window.Philter=function(){var r={transitionTime:.5,url:"../js",tag:!0},i=document.createElement("style");this.errors={falsePath:"Philter Error: you probably didn't declare the right path to philter folder!"},this.filterCount={color:0},this.filters=["blur","grayscale","hue-rotate","saturate","sepia","contrast","invert","opacity","brightness","drop-shadow","svg","color"],this.elements=[],this.styleString="",arguments[0]&&"object"==typeof arguments[0]?this.options=l(r,arguments[0]):this.options=r,t.call(this),e.call(this),this.styleString+="*{transition:filter "+this.options.transitionTime+"s,-webkit-filter "+this.options.transitionTime+"s;}",i.innerHTML=this.styleString,document.head.appendChild(i)}}();
